var app=angular.module("myApp",["ngRoute"]);app.run(function(a,b){a.$on("$routeChangeStart",function(a,c){var d="undefined"==typeof c.$$route?!1:c.$$route.requireLogin;d&&!b.getStatus()&&(a.preventDefault(),window.location="#/login")})}),app.config(function(a,b){a.interceptors.push("globalRequestInterceptor");for(route in app.routes)b.when(route,app.routes[route]);b.otherwise({templateUrl:"templates/404.html"})}),app.controller("HomeCtrl",function(a){a.greeting="Home Page"}),app.controller("SigninCtrl",function(a,b,c,d){a.signin=function(){c.login(),b.path(d.AFTER_LOGIN)}}),app.controller("ProductsCtrl",function(a,b,c,d){a.greeting="Products Page",b.main="Some Value",this.productSuccess=function(b){a.category=b.data},this.productError=function(a){console.log(a)},d.load().then(this.productSuccess),this.productSuccess=function(b){a.data=b.data},this.productError=function(a){console.log(a)},c.data={test:!0},c.load().then(this.productSuccess,this.productError)}),app.controller("topbarCtrl",function(a,b,c,d,e){a.userName="Yeasin Hossain",a.isLoggedIn=d.getStatus(),b.$watch("isLoggedIn",function(){a.isLoggedIn=d.getStatus()}),a.logout=function(){d.logout(),a.isLoggedIn=d.getStatus(),c.path(e.AFTER_LOGOUT)}}),app.controller("sidebarCtrl",function(a){a.menuItems=[{id:1,label:"Menu 1",href:"http://google.com"},{id:2,label:"Menu 2",href:"http://yahoo.com"},{id:3,label:"Menu 3",href:"http://baidu.com"}],a.msg=function(a){console.log(a)}}),app.directive("sideBar",function(){return{restrict:"A",templateUrl:"templates/directives/sidebar.html"}}),app.factory("appFactory",function(){return{IS_LOGGED_IN:"isLoggedIn",AFTER_LOGIN:"/products",AFTER_LOGOUT:"/"}}),app.factory("globalRequestInterceptor",["$q",function(){return{responseError:function(){return!1}}}]),app.filter("currencyFilter",function(){return function(a){return a+"$"}}),app.routes={"/":{controller:"HomeCtrl",templateUrl:"templates/home.html",requireLogin:!1},"/products":{controller:"ProductsCtrl",templateUrl:"templates/products.html",requireLogin:!0},"/about":{templateUrl:"templates/about.html"},"/login":{templateUrl:"templates/login.html"}},app.service("userStatusService",function(a,b){return this.username=null,this.password=null,this.isLoggedIn=0,this.getStatus=function(){var c=localStorage.getItem(b.IS_LOGGED_IN);return c=null===c?0:parseInt(c,10),this.isLoggedIn=c,a.isLoggedIn=c,c},this.login=function(){localStorage.setItem(b.IS_LOGGED_IN,1),this.isLoggedIn=1,a.isLoggedIn=1},this.logout=function(){localStorage.removeItem(b.IS_LOGGED_IN),this.isLoggedIn=0,a.isLoggedIn=0},this}),app.service("productCategoryService",function(a){return this.service="api/productCategory",this.data={},this.load=function(){return a({url:this.service,method:"GET",params:this.data,nointercept:!0})},this}),app.service("productsService",function(a){return this.service="api/products",this.data={},this.load=function(){return a({url:this.service,method:"GET",params:this.data,nointercept:!0})},this});